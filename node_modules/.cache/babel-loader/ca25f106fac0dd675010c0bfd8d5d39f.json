{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\21653\\\\Downloads\\\\tua-react-admin-main\\\\tua-react-admin-main\\\\src\\\\pages\\\\Finance\\\\Finance.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport SelectWalletModal from \"./Modal/Modal\";\nimport { VStack, useDisclosure, Button, Text, HStack, Select, Input, Box } from \"@chakra-ui/react\";\nimport { CheckCircleIcon, WarningIcon } from \"@chakra-ui/icons\";\nimport { Tooltip } from \"@chakra-ui/react\";\nimport { connectors } from \"./Utils/connectors\";\nimport { toHex, truncateAddress } from \"./Utils/utils\";\nimport { networkParams } from \"./Utils/network\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Finance = () => {\n  _s();\n\n  const [defaultAccount, setDefaultAccount] = useState();\n  const [userBalance, setuserBalance] = useState();\n  const {\n    isOpen,\n    onOpen,\n    onClose\n  } = useDisclosure();\n  const {\n    library,\n    chainId,\n    account,\n    activate,\n    deactivate,\n    active\n  } = useWeb3React();\n  const [signature, setSignature] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [network, setNetwork] = useState(undefined);\n  const [message, setMessage] = useState(\"\");\n  const [signedMessage, setSignedMessage] = useState(\"\");\n  const [verified, setVerified] = useState();\n\n  const openMetamask = () => {\n    if (window.ethereum) {\n      window.ethereum.request({\n        method: \"eth_requestAccounts\"\n      }).then(res => {\n        accounChangeHandler(res[0]);\n      });\n    } else {\n      setError(\"install metamask\");\n    }\n  };\n\n  const handleNetwork = e => {\n    const id = e.target.value;\n    setNetwork(Number(id));\n  };\n\n  const handleInput = e => {\n    const msg = e.target.value;\n    setMessage(msg);\n  };\n\n  const switchNetwork = async () => {\n    try {\n      await library.provider.request({\n        method: \"wallet_switchEthereumChain\",\n        params: [{\n          chainId: toHex(network)\n        }]\n      });\n    } catch (switchError) {\n      if (switchError.code === 4902) {\n        try {\n          await library.provider.request({\n            method: \"wallet_addEthereumChain\",\n            params: [networkParams[toHex(network)]]\n          });\n        } catch (error) {\n          setError(error);\n        }\n      }\n    }\n  };\n\n  const signMessage = async () => {\n    if (!library) return;\n\n    try {\n      const signature = await library.provider.request({\n        method: \"personal_sign\",\n        params: [message, account]\n      });\n      setSignedMessage(message);\n      setSignature(signature);\n    } catch (error) {\n      setError(error);\n    }\n  };\n\n  const verifyMessage = async () => {\n    if (!library) return;\n\n    try {\n      const verify = await library.provider.request({\n        method: \"personal_ecRecover\",\n        params: [signedMessage, signature]\n      });\n      setVerified(verify === account.toLowerCase());\n    } catch (error) {\n      setError(error);\n    }\n  };\n\n  const refreshState = () => {\n    window.localStorage.setItem(\"provider\", undefined);\n    setNetwork(\"\");\n    setMessage(\"\");\n    setSignature(\"\");\n    setVerified(undefined);\n  };\n\n  const disconnect = () => {\n    refreshState();\n    deactivate();\n  };\n\n  useEffect(() => {\n    const provider = window.localStorage.getItem(\"provider\");\n    if (provider) activate(connectors[provider]);\n  }, []);\n\n  const accounChangeHandler = newAccount => {\n    setDefaultAccount(newAccount);\n    getUserBalance(newAccount);\n  };\n\n  const getUserBalance = address => {\n    window.ethereum.request({\n      method: \"eth_getBalance\",\n      params: [address, \"latest\"]\n    }).then(balance => {\n      setuserBalance(ethers.utils.formatEther(balance));\n    });\n  };\n\n  window.ethereum.on(\"accountsChanged\", accounChangeHandler);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Finance\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 24\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"wallet\",\n      children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n        class: \"left-wallet\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"wallet-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \" My Wallets \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"modal-open\",\n            onClick: openMetamask,\n            children: [/*#__PURE__*/_jsxDEV(HStack, {\n              children: !active ? /*#__PURE__*/_jsxDEV(Button, {\n                onClick: onOpen,\n                children: \"Connect Wallet\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                onClick: disconnect,\n                children: \"Disconnect\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(SelectWalletModal, {\n                isOpen: isOpen,\n                closeModal: onClose\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), \"'\", /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"cc-select\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"'+data.id+'\",\n            class: \"cc mc\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"cc-img-main\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"cc-num\",\n              children: defaultAccount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"cc-date\",\n              children: \"Valid Thru: 12/17\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"content\", {\n        className: \"right-trans\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \" Current Balance \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          id: \"balance\",\n          children: [userBalance, \" ETH\", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"trans-list\",\n          children: [\"'\", \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"trans trans mc\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"trans-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                class: \"trans-plus\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                class: \"trans-name\",\n                children: \"Apple Iphone 6, 6g GB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                class: \"trans-type-date\",\n                children: \"Electronics #343223 - 12 July, 2015\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"trans-amt\",\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                class: \"trans-amt amt-green\",\n                children: \"5000 DT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Finance, \"TPTbhI1OVOGWb7nZm7E1q/z4h0Q=\", false, function () {\n  return [useDisclosure, useWeb3React];\n});\n\n_c = Finance;\nexport default Finance;\n\nvar _c;\n\n$RefreshReg$(_c, \"Finance\");","map":{"version":3,"sources":["C:/Users/21653/Downloads/tua-react-admin-main/tua-react-admin-main/src/pages/Finance/Finance.jsx"],"names":["React","useState","useEffect","ethers","useWeb3React","SelectWalletModal","VStack","useDisclosure","Button","Text","HStack","Select","Input","Box","CheckCircleIcon","WarningIcon","Tooltip","connectors","toHex","truncateAddress","networkParams","Finance","defaultAccount","setDefaultAccount","userBalance","setuserBalance","isOpen","onOpen","onClose","library","chainId","account","activate","deactivate","active","signature","setSignature","error","setError","network","setNetwork","undefined","message","setMessage","signedMessage","setSignedMessage","verified","setVerified","openMetamask","window","ethereum","request","method","then","res","accounChangeHandler","handleNetwork","e","id","target","value","Number","handleInput","msg","switchNetwork","provider","params","switchError","code","signMessage","verifyMessage","verify","toLowerCase","refreshState","localStorage","setItem","disconnect","getItem","newAccount","getUserBalance","address","balance","utils","formatEther","on"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { ethers } from \"ethers\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\n\r\nimport SelectWalletModal from \"./Modal/Modal\";\r\nimport {\r\n  VStack,\r\n  useDisclosure,\r\n  Button,\r\n  Text,\r\n  HStack,\r\n  Select,\r\n  Input,\r\n  Box,\r\n} from \"@chakra-ui/react\";\r\nimport { CheckCircleIcon, WarningIcon } from \"@chakra-ui/icons\";\r\nimport { Tooltip } from \"@chakra-ui/react\";\r\nimport { connectors } from \"./Utils/connectors\";\r\nimport { toHex, truncateAddress } from \"./Utils/utils\";\r\nimport { networkParams } from \"./Utils/network\";\r\n\r\nconst Finance = () => {\r\n  const [defaultAccount, setDefaultAccount] = useState();\r\n  const [userBalance, setuserBalance] = useState();\r\n  const { isOpen, onOpen, onClose } = useDisclosure();\r\n  const { library, chainId, account, activate, deactivate, active } =\r\n    useWeb3React();\r\n  const [signature, setSignature] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [network, setNetwork] = useState(undefined);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [signedMessage, setSignedMessage] = useState(\"\");\r\n  const [verified, setVerified] = useState();\r\n  const openMetamask = () => {\r\n    if (window.ethereum) {\r\n      window.ethereum.request({ method: \"eth_requestAccounts\" }).then((res) => {\r\n        accounChangeHandler(res[0]);\r\n      });\r\n    } else {\r\n      setError(\"install metamask\");\r\n    }\r\n  };\r\n\r\n  const handleNetwork = (e) => {\r\n    const id = e.target.value;\r\n    setNetwork(Number(id));\r\n  };\r\n\r\n  const handleInput = (e) => {\r\n    const msg = e.target.value;\r\n    setMessage(msg);\r\n  };\r\n\r\n  const switchNetwork = async () => {\r\n    try {\r\n      await library.provider.request({\r\n        method: \"wallet_switchEthereumChain\",\r\n        params: [{ chainId: toHex(network) }],\r\n      });\r\n    } catch (switchError) {\r\n      if (switchError.code === 4902) {\r\n        try {\r\n          await library.provider.request({\r\n            method: \"wallet_addEthereumChain\",\r\n            params: [networkParams[toHex(network)]],\r\n          });\r\n        } catch (error) {\r\n          setError(error);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const signMessage = async () => {\r\n    if (!library) return;\r\n    try {\r\n      const signature = await library.provider.request({\r\n        method: \"personal_sign\",\r\n        params: [message, account],\r\n      });\r\n      setSignedMessage(message);\r\n      setSignature(signature);\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n  };\r\n\r\n  const verifyMessage = async () => {\r\n    if (!library) return;\r\n    try {\r\n      const verify = await library.provider.request({\r\n        method: \"personal_ecRecover\",\r\n        params: [signedMessage, signature],\r\n      });\r\n      setVerified(verify === account.toLowerCase());\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n  };\r\n\r\n  const refreshState = () => {\r\n    window.localStorage.setItem(\"provider\", undefined);\r\n    setNetwork(\"\");\r\n    setMessage(\"\");\r\n    setSignature(\"\");\r\n    setVerified(undefined);\r\n  };\r\n\r\n  const disconnect = () => {\r\n    refreshState();\r\n    deactivate();\r\n  };\r\n\r\n  useEffect(() => {\r\n    const provider = window.localStorage.getItem(\"provider\");\r\n    if (provider) activate(connectors[provider]);\r\n  }, []);\r\n\r\n  const accounChangeHandler = (newAccount) => {\r\n    setDefaultAccount(newAccount);\r\n    getUserBalance(newAccount);\r\n  };\r\n  const getUserBalance = (address) => {\r\n    window.ethereum\r\n      .request({ method: \"eth_getBalance\", params: [address, \"latest\"] })\r\n      .then((balance) => {\r\n        setuserBalance(ethers.utils.formatEther(balance));\r\n      });\r\n  };\r\n  window.ethereum.on(\"accountsChanged\", accounChangeHandler);\r\n  return (\r\n    <div className=\"card\">\r\n      <h2>Finance</h2> <br />\r\n      <div class=\"wallet\">\r\n        <aside class=\"left-wallet\">\r\n          <div class=\"wallet-head\">\r\n            <h1> My Wallets </h1>\r\n            <div class=\"modal-open\" onClick={openMetamask}>\r\n              <HStack>\r\n                {!active ? (\r\n                  <Button onClick={onOpen}>Connect Wallet</Button>\r\n                ) : (\r\n                  <Button onClick={disconnect}>Disconnect</Button>\r\n                )}\r\n              </HStack>\r\n              <div>\r\n                <SelectWalletModal isOpen={isOpen} closeModal={onClose} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          '\r\n          <div class=\"cc-select\">\r\n            <div id=\"'+data.id+'\" class=\"cc mc\">\r\n              <div class=\"cc-img-main\"></div>\r\n              <div class=\"cc-num\">{defaultAccount}</div>\r\n              <div class=\"cc-date\">Valid Thru: 12/17</div>\r\n            </div>\r\n            \"\r\n          </div>\r\n        </aside>\r\n        <content className=\"right-trans\">\r\n          <h1> Current Balance </h1>\r\n          <h4 id=\"balance\">\r\n            {userBalance} ETH\r\n            {error}\r\n          </h4>\r\n          <div class=\"trans-list\">\r\n            '{\" \"}\r\n            <div class=\"trans trans mc\">\r\n              <div class=\"trans-details\">\r\n                <span class=\"trans-plus\"></span>\r\n                <h3 class=\"trans-name\">Apple Iphone 6, 6g GB</h3>\r\n                <h5 class=\"trans-type-date\">\r\n                  Electronics #343223 - 12 July, 2015\r\n                </h5>\r\n              </div>\r\n              <div class=\"trans-amt\">\r\n                <h4 class=\"trans-amt amt-green\">5000 DT</h4>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </content>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Finance;\r\n"]},"metadata":{},"sourceType":"module"}